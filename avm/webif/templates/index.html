<!DOCTYPE html>
{% extends "base.html" %}

{% block content %}
<body>
<div class="container-fluid m-3">
	<div style="margin-left: 2px; margin-right: 2px;" class="row">
		<div align="center" class="col-sm-2">
			&nbsp;<img src="static/img/plugin_logo.png" width="150" height="150">
		</div>
		<div class="col-sm-4">
			<h3>SmartHomeNG</h3>
			<h5>{{ plugin_shortname }} Plugin v{{ plugin_version }}</h5>
			{% if p.get_instance_name() != '' %}
			<h5>instance: {{p.get_instance_name() }}</h5>
			{% endif %}
			<br>
			<h6>host: {{ p._fritz_device.get_host() }}</h6>
			<h6>port: {{ p._fritz_device.get_port() }} {% if p._fritz_device.is_ssl() %}(HTTPS){% endif %}</h6>
			{% if p._fritz_device.get_user() %}
			<h6>user: {{ p._fritz_device.get_user() }}</h6>
			{% endif %}
			{% if p._fritz_device.get_password() %}
			<h6>password: {{ p._fritz_device.get_password() }}</h6>
			{% endif %}
		</div>
		<div class="col-sm-6">

			<table class="table table-striped table-hover">
				<tbody>
					<tr>
						<td class="py-1"><strong>Verbunden</strong></td>
						<td class="py-1">Ja</td>
						<td class="py-1" width="300px"></td>
						<td></td>
					</tr>
					<tr>
						<td class="py-1"><strong>Call Monitor</strong></td>
						<td class="py-1">{% if p._call_monitor %}Ja{% else %}Nein{% endif %}</td>
						<td class="py-1" width="300px"></td>
						<td></td>
					</tr>
					<tr>
						<td class="py-1"><strong>SSL</strong></td>
						<td class="py-1">{% if p._fritz_device.is_ssl() %}Ja{% else %}Nein{% endif %}</td>
						<td class="py-1" width="300px"></td>
						<td></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

<div class="table-responsive" style="margin-left: 2px; margin-right: 2px;" class="row">
	<div class="col-sm-12">
		<h5>AVM Items ({{ p._fritz_device.get_item_count() }})</h5>

		<table class="table table-striped table-hover pluginList">
			<thead>
				<tr class="shng_heading">
					<th>Pfad</th>
					<th>Typ</th>
					<th>AVM Data Type</th>
					<th>Wert</th>
				</tr>
			</thead>
			<tbody>
				{% for item in p._fritz_device.get_items() %}
					{% if p.get_instance_name() %}
				    	{% set instance_key = "avm_data_type@"+p.get_instance_name() %}
					{% else %}
						{% set instance_key = "avm_data_type" %}
					{% endif %}
					<tr id="{{ loop.index }}_click">
						<td class="py-1">{{ item._path }}</td>
						<td class="py-1">{{ item._type }}</td>
						<td class="py-1">{{ item.conf[instance_key] }}</td>
						<td class="py-1">{{ item() }}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
		{% if p._call_monitor %}
		<h5>Call Monitor Items</h5>
		<table class="table table-striped table-hover pluginList">
			<thead>
				<tr class="shng_heading">
					<th>Pfad</th>
					<th>Typ</th>
					<th>AVM Data Type</th>
					<th>Wert</th>
				</tr>
			</thead>
			<tbody>
				{% for item in p._monitoring_service.get_items() %}
				    {% if p.get_instance_name() %}
				    	{% set instance_key = "avm_data_type@"+p.get_instance_name() %}
					{% else %}
						{% set instance_key = "avm_data_type" %}
					{% endif %}
					<tr id="{{ loop.index }}_click">
						<td class="py-1">{{ item._path }}</td>
						<td class="py-1">{{ item._type }}</td>
						<td class="py-1">{{ item.conf[instance_key] }}</td>
						<td class="py-1">{{ item() }}</td>
					</tr>
				{% endfor %}
				{% for item in p._monitoring_service.get_trigger_items() %}
					{% if p.get_instance_name() %}
				    	{% set instance_key = "avm_data_type@"+p.get_instance_name() %}
					{% else %}
						{% set instance_key = "avm_data_type" %}
					{% endif %}
					<tr id="{{ loop.index }}_click">
						<td class="py-1">{{ item._path }}</td>
						<td class="py-1">{{ item._type }}</td>
						<td class="py-1">{{ item.conf[instance_key] }}</td>
						<td class="py-1">{{ item() }}</td>
					</tr>
				{% endfor %}
				{% for item in p._monitoring_service.get_items_incoming() %}
					{% if p.get_instance_name() %}
				    	{% set instance_key = "avm_data_type@"+p.get_instance_name() %}
					{% else %}
						{% set instance_key = "avm_data_type" %}
					{% endif %}
					<tr id="{{ loop.index }}_click">
						<td class="py-1">{{ item._path }}</td>
						<td class="py-1">{{ item._type }}</td>
						<td class="py-1">{{ item.conf[instance_key] }}</td>
						<td class="py-1">{{ item() }}</td>
					</tr>
				{% endfor %}
				{% for item in p._monitoring_service.get_items_outgoing() %}
					{% if p.get_instance_name() %}
				    	{% set instance_key = "avm_data_type@"+p.get_instance_name() %}
					{% else %}
						{% set instance_key = "avm_data_type" %}
					{% endif %}
					<tr id="{{ loop.index }}_click">
						<td class="py-1">{{ item._path }}</td>
						<td class="py-1">{{ item._type }}</td>
						<td class="py-1">{{ item.conf[instance_key] }}</td>
						<td class="py-1">{{ item() }}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
		{% endif %}
	</div>

	</div>
</div>
</div>

{% endblock %}
