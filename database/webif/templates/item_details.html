<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><!DOCTYPE html>
{% extends "base_plugin.html" %}

{% block headtable %}
<table class="table table-striped table-hover">
	<tbody>
		<tr>
			<td class="py-1" width="150px"><strong>Verbunden</strong></td>
			<td class="py-1">{% if p._db._connected %}Ja{% else %}Nein{% endif %}</td>
			<td class="py-1" width="300px"></td>
			<td></td>
		</tr>
		<tr>
			<td class="py-1"><strong>Parameter</strong></td>
			<td colspan="3" class="py-1">
			{% for key, value in p._db._params.items() %}
				{% if key != "passwd" %}
				{{ key }}: {{ value }}
				{% else %}
				{{ key }}:  {% for letter in value %}*{% endfor %}
				{% endif %}<br/>
				{% endfor %}
			</td>
		</tr>
	</tbody>
</table>
{% endblock %}
{% block buttons %}
<button type="button" class="btn btn-shng btn-sm" onclick="window.open('db.dump')">Datenbank-Dump</button>
<button type="button" class="btn btn-shng btn-sm" onclick="location.href='?'">Übersicht</button>
{% endblock %}
{% block bodytab1 %}
<script type="text/javascript" language="javascript">
function confirmDelete(url, text) {
  if (confirm(text)) {
    window.location.href=url;
  }
  return false;
}
</script>
{% if action == 'delete_log' %}
<div class="mb-2 alert alert-success alert-dismissible fade show" role="alert">
  <strong>Löschauftrag für die Einträge von Item ID {{ item_id }} in der Tabelle "log" wurde erfolgreich initiiert!</strong><br/>
Das Löschen kann noch kurze Zeit dauern, da die DELETE Anfrage erst nach Abschluß der bestehenden Transaktionen erfolgen kann.
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
{% endif %}
<div class="mb-2">
The following entries are in the (historical) log table for the item with item-id {{ item_id }}:
</div>
<table class="table table-striped table-hover pluginList">
	<thead>
	<tr>
		<th>Time</th>
		<th>ItemID</th>
		<th>Duration</th>
		<th>VAL_STR</th>
		<th>VAL_NUM</th>
		<th>VAL_BOOL</th>
		<th>Changed</th>
	</tr>
	</thead>
{% for dataset in log_array %}
	<tr>
		<td class="py-1">{{ dataset[0] }}</td>
		<td class="py-1">{{ dataset[1] }}</td>
		<td class="py-1">{{ dataset[2] }}</td>
		<td class="py-1">{{ dataset[3] }}</td>
		<td class="py-1">{{ dataset[4] }}</td>
		<td class="py-1">{{ dataset[5] }}</td>
		<td class="py-1">{{ dataset[6] }}</td>
	</tr>
{% endfor %}
</table>
{% endblock %}
</title>
</head>
<body>

</body>
</html>